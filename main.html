<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For Gunnn üíñ</title>

<style>
  body {
    margin: 0;
    height: 100vh;
    background: linear-gradient(135deg, #ff9a9e, #fad0c4);
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Segoe UI', sans-serif;
    overflow: hidden;
  }

  body.allow-scroll {
    height: auto;
    min-height: 100vh;
    overflow-y: auto;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    padding: 40px 0 90px;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  body.allow-scroll::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .stage {
    width: min(720px, 92vw);
    height: min(600px, 90vh);
    position: relative;
    text-align: center;
    color: white;
  }

  h1 { font-size: 3rem; margin: 0 0 12px; }
  p { font-size: 1.2rem; line-height: 1.6; margin: 12px 0; }

  button {
    padding: 16px 36px;
    font-size: 1.3rem;
    border: none;
    border-radius: 40px;
    cursor: pointer;
    transition: all 0.25s ease;
    position: absolute;
  }

  #yes {
    background: white;
    color: #ff5f6d;
    font-weight: bold;
    left: 190px;
    top: 310px;
    width: 130px;
    height: 55px;
  }

  #no {
    background: #ff5f6d;
    color: white;
    left: 390px;
    top: 310px;
    width: 130px;
    height: 55px;
  }

  #hint {
    position: absolute;
    font-size: 0.9rem;
    opacity: 0;
    transition: 0.3s;
    pointer-events: none;
  }

  #hint.show {
    opacity: 1;
    transform: translateY(-10px);
  }

  .card {
    display: none;
    background: rgba(255,255,255,0.28);
    padding: 40px;
    border-radius: 25px;
    backdrop-filter: blur(14px);
    animation: pop 1.2s ease;
  }

  .card img {
    width: 100%;
    max-width: 320px;
    max-height: min(38vh, 240px);
    height: auto;
    object-fit: cover;
    border-radius: 20px;
  }

  .love-photo,
  .love-actions {
    display: flex;
    justify-content: center;
  }

  .love-photo {
    margin-top: 14px;
  }

  .love-actions {
    margin-top: 16px;
  }

  #foreverBtn {
    position: static;
    background: white;
    color: #ff5f6d;
    font-weight: bold;
  }

  .forever-note {
    margin-top: 6px;
  }

  .forever-note p {
    margin: 8px 0;
  }

  .slider {
    position: relative;
    width: min(420px, 78vw);
    aspect-ratio: 4 / 3;
    height: auto;
    margin: 18px auto 0;
    border-radius: 22px;
    overflow: hidden;
    border: 2px solid rgba(255,255,255,0.45);
    box-shadow: 0 18px 36px rgba(0,0,0,0.2);
    background: rgba(255,255,255,0.08);
  }

  .slider img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0;
    transform: translateX(34px) scale(0.98);
    transition: opacity 0.7s ease, transform 0.9s ease;
    max-width: none;
    max-height: none;
    margin: 0;
    border-radius: 0;
  }

  .slider img.active {
    opacity: 1;
    transform: translateX(0) scale(1);
  }

  .scroll-prompt {
    margin: 18px auto 0;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }

  .scroll-prompt.show {
    opacity: 1;
    transform: translateY(0);
  }

  .scroll-line {
    width: min(560px, 86vw);
    height: 2px;
    background: rgba(255,255,255,0.85);
    border-radius: 999px;
    margin: 0 auto;
  }

  .scroll-word {
    margin-top: 12px;
    font-size: 1.1rem;
    font-weight: 900;
    letter-spacing: 0.22em;
    text-transform: uppercase;
  }

  .page-gap {
    display: none;
    width: 100%;
    height: 65vh;
  }

  .page-gap.show {
    display: block;
  }

  .ending-page {
    display: none;
    width: min(960px, 94vw);
    margin: 0 auto;
  }

  .ending-page.show {
    display: block;
  }

  .ending-paper {
    background: rgba(255,255,255,0.22);
    border: 1px solid rgba(255,255,255,0.38);
    border-radius: 26px;
    padding: 38px 34px;
    backdrop-filter: blur(14px);
    box-shadow: 0 22px 46px rgba(0,0,0,0.18);
    text-align: left;
  }

  .ending-paper h2 {
    margin: 0 0 14px;
    font-size: 2.4rem;
    font-weight: 900;
    letter-spacing: -0.02em;
  }

  .ending-paper p {
    margin: 12px 0;
    font-size: 1.35rem;
    font-weight: 700;
    line-height: 1.75;
  }

  .ending-paper .signature {
    margin-top: 22px;
    font-weight: 900;
    letter-spacing: 0.04em;
  }

  .gift-card {
    margin-top: 34px;
    padding: 22px 20px;
    border-radius: 22px;
    border: 1px solid rgba(255,255,255,0.42);
    background: linear-gradient(135deg, rgba(255,140,80,0.28), rgba(255,255,255,0.14));
  }

  .gift-card h3 {
    margin: 0 0 6px;
    font-size: 2rem;
    font-weight: 900;
    letter-spacing: -0.02em;
  }

  .gift-card p {
    margin: 10px 0;
    font-size: 1.15rem;
    font-weight: 700;
    line-height: 1.65;
  }

  .gift-code-box {
    margin-top: 14px;
    padding: 16px 14px;
    border-radius: 18px;
    background: rgba(255,255,255,0.16);
    border: 1px solid rgba(255,255,255,0.28);
  }

  .gift-code-label {
    font-size: 0.95rem;
    font-weight: 900;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    opacity: 0.9;
  }

  .gift-code {
    margin-top: 10px;
    font-family: Consolas, "Courier New", monospace;
    font-size: 1.6rem;
    font-weight: 900;
    letter-spacing: 0.18em;
    line-height: 1.2;
    user-select: none;
    transition: filter 0.6s ease, color 0.6s ease, text-shadow 0.6s ease;
  }

  .gift-code.blurred {
    filter: blur(8px);
    color: rgba(255,255,255,0.22);
    text-shadow: 0 0 18px rgba(255,255,255,0.72);
  }

  .gift-code.revealed {
    filter: none;
    color: rgba(255,255,255,1);
    text-shadow: none;
    user-select: text;
  }

  .quiz {
    margin-top: 18px;
    display: grid;
    gap: 14px;
  }

  .quiz fieldset {
    border: 0;
    padding: 0;
    margin: 0;
  }

  .quiz legend {
    font-size: 1.15rem;
    font-weight: 900;
    margin-bottom: 10px;
  }

  .quiz-options {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
  }

  .quiz-option {
    position: relative;
  }

  .quiz-option input {
    position: absolute;
    inset: 0;
    opacity: 0;
    pointer-events: none;
  }

  .quiz-option span {
    display: block;
    padding: 12px 12px;
    border-radius: 16px;
    background: rgba(255,255,255,0.14);
    border: 1px solid rgba(255,255,255,0.22);
    font-weight: 800;
    cursor: pointer;
    transition: transform 0.18s ease, background 0.18s ease, border-color 0.18s ease;
  }

  .quiz-option span:hover {
    transform: translateY(-1px);
    background: rgba(255,255,255,0.18);
    border-color: rgba(255,255,255,0.32);
  }

  .quiz-option input:checked + span {
    background: rgba(255,255,255,0.30);
    border-color: rgba(255,255,255,0.45);
  }

  .quiz-btn {
    position: static;
    margin-top: 16px;
    padding: 14px 22px;
    font-size: 1.15rem;
    border-radius: 18px;
    background: white;
    color: #ff5f6d;
    font-weight: 900;
    width: 100%;
  }

  .quiz-result {
    margin-top: 12px;
    font-weight: 800;
    min-height: 1.4em;
  }

  @media (max-width: 520px) {
    .ending-paper {
      padding: 30px 22px;
    }

    .ending-paper h2 {
      font-size: 2.05rem;
    }

    .ending-paper p {
      font-size: 1.2rem;
    }

    .quiz-options {
      grid-template-columns: 1fr;
    }

    .gift-code {
      font-size: 1.35rem;
      letter-spacing: 0.14em;
    }
  }

  .reveal {
    opacity: 0;
    transform: translateY(16px);
    transition: opacity 0.7s ease, transform 0.7s ease;
  }

  .reveal.show {
    opacity: 1;
    transform: translateY(0);
  }

  @keyframes pop {
    from { opacity: 0; transform: scale(0.7); }
    to { opacity: 1; transform: scale(1); }
  }

  @keyframes shake {
    0% { transform: translateX(0); }
    25% { transform: translateX(-6px); }
    50% { transform: translateX(6px); }
    75% { transform: translateX(-6px); }
    100% { transform: translateX(0); }
  }

  .shake {
    animation: shake 0.35s;
  }

  canvas {
    position: fixed;
    inset: 0;
    pointer-events: none;
  }
</style>
</head>

<body>

<!-- QUESTION -->
<div class="stage" id="questionStage">
  <h1>GUNNN üíï<br>Will you be my Valentine?</h1>
  <button id="yes">YES </button>
  <button id="no">NO </button>
  <div id="hint"></div>
</div>

<!-- LOVE CARD -->
<div class="stage card" id="loveCard">
  <h1>YAYYY ü•πüíñ</h1>
  <p>
    I knew you‚Äôd say yes üòã<br><br>
    Gunnn, you are my Icecream, my Drlingggg,
    and my favorite feeling in the world
  </p>
  <p>‚Äî Yours, Sky üíû</p>

  <div class="love-photo">
    <img src="photo.jpg" >
  </div>

  <div class="love-actions">
    <button id="foreverBtn">Forever? üíç</button>
  </div>
</div>

<!-- FOREVER CARD -->
<div class="stage card" id="foreverCard">
  <h1>Forever & Always ‚ôæÔ∏èüíñ</h1>
  <div class="forever-note">
    <p>
      Gunn,<br><br>
      This isn‚Äôt just today.  
      It‚Äôs every tomorrow I want.  
      I choose you. Always YOU BABEü´∂
    </p>
    <p>‚Äî Your forever, Sky üíï</p>
    <p>Here‚Äôs a little slide of my favorite you. üí´</p>
  </div>

  <div class="slider" id="foreverSlider" aria-label="Her photos slideshow"></div>

  <div class="scroll-prompt" id="scrollPrompt" aria-hidden="true">
    <div class="scroll-line"></div>
    <div class="scroll-word">Scroll ‚Üì</div>
  </div>
</div>

<div class="page-gap" id="pageGap" aria-hidden="true"></div>

<section class="ending-page" id="endingPage" aria-label="Love notes ending">
  <div class="ending-paper">
    <h2 class="reveal">Smtg jo me bolna chata hu hamesa</h2>
    <p class="reveal">If the whole world is against you, I‚Äôll be there ‚Äî cheering you up, no matter what happens.</p>
    <p class="reveal">Cheering you up like.... Heyy.. HEYYYY....look.. LOOKKK..this is myy babee,this isss myyy darlinggggg</p>
    <p class="reveal">And every midnight, if you‚Äôre alone and crying, I‚Äôll be there‚Äîcrying with you.</p>

    <h2 class="reveal">Things I‚Äôll Always Do</h2>
    <p class="reveal">Hold your hand in public and in private ‚Äî when it‚Äôs easy, and when you need it most.</p>
    <p class="reveal">Choose you with patience, with loyalty, and with a love that keeps growing.</p>
    <p class="reveal">Be your safe place ‚Äî the one you can come home to, every time.</p> 

    <p class="reveal signature">Forever yours, Sky</p>

    <div class="gift-card">
      <h3 class="reveal">Icecream for u BBG&lt;3</h3>
      <p class="reveal">A sweet treat from my side ‚Äî pick your favorite icecream and enjoy it for me.</p>

      <div class="gift-code-box">
        <div class="gift-code-label reveal">Redeem Code</div>
        <div class="gift-code blurred reveal" id="swiggyCode" data-code="SWIGGY-XXXX-XXXX">SWIGGY-XXXX-XXXX</div>
        <p class="reveal">Twist: answer these 3 questions correctly to unblur the code.</p>
      </div>

      <form class="quiz" id="swiggyQuiz" autocomplete="off">
        <fieldset class="reveal">
          <legend>1) My Fav colour</legend>
          <div class="quiz-options">
            <label class="quiz-option">
              <input type="radio" name="q1" value="a">
              <span>Red</span>
            </label>
            <label class="quiz-option">
              <input type="radio" name="q1" value="b">
              <span>Blue</span>
            </label>
            <label class="quiz-option">
              <input type="radio" name="q1" value="c">
              <span>Yellow</span>
            </label>
            <label class="quiz-option">
              <input type="radio" name="q1" value="d">
              <span>Green</span>
            </label>
          </div>
        </fieldset>

        <fieldset class="reveal">
          <legend>2) My Fav thing.</legend>
          <div class="quiz-options">
            <label class="quiz-option">
              <input type="radio" name="q2" value="a">
              <span>Games</span>
            </label>
            <label class="quiz-option">
              <input type="radio" name="q2" value="b">
              <span>Bike</span>
            </label>
            <label class="quiz-option">
              <input type="radio" name="q2" value="c">
              <span>PC</span>
            </label>
            <label class="quiz-option">
              <input type="radio" name="q2" value="d">
              <span>YOU</span>
            </label>
          </div>
        </fieldset>

        <fieldset class="reveal">
          <legend>3) My Fav Food</legend>
          <div class="quiz-options">
            <label class="quiz-option">
              <input type="radio" name="q3" value="a">
              <span>Momo</span>
            </label>
            <label class="quiz-option">
              <input type="radio" name="q3" value="b">
              <span>Noodles</span>
            </label>
            <label class="quiz-option">
              <input type="radio" name="q3" value="c">
              <span>You</span>
            </label>
            <label class="quiz-option">
              <input type="radio" name="q3" value="d">
              <span>Icecream</span>
            </label>
          </div>
        </fieldset>
      </form>

      <button class="quiz-btn reveal" type="button" id="swiggyCheck">Unlock My Treat</button>
      <div class="quiz-result reveal" id="swiggyResult"></div>
    </div>
  </div>
</section>

<audio id="music">
  <source src="zulfein.mp3" type="audio/mpeg">
</audio>

<audio id="musicYes">
  <source src="Careless Whisper.mp3" type="audio/mpeg">
</audio>

<canvas id="hearts"></canvas>

<script>
  const noBtn = document.getElementById("no");
  const yesBtn = document.getElementById("yes");
  const hint = document.getElementById("hint");
  const stage = document.querySelector(".stage");
  const music = document.getElementById("music");
  const musicYes = document.getElementById("musicYes");
  const foreverSlider = document.getElementById("foreverSlider");
  const scrollPrompt = document.getElementById("scrollPrompt");
  const pageGap = document.getElementById("pageGap");
  const endingPage = document.getElementById("endingPage");
  const swiggyCode = document.getElementById("swiggyCode");
  const swiggyQuiz = document.getElementById("swiggyQuiz");
  const swiggyCheck = document.getElementById("swiggyCheck");
  const swiggyResult = document.getElementById("swiggyResult");

  let noTries = 0;
  let yesScale = 1;
  const MAX_YES_SCALE = 1.8;

  const messages = [
    "nice try üòè",
    "okay, funny üòÖ",
    "you‚Äôre smiling now üòå"
  ];

  const foreverPhotos = [
    "her photos/31d1c1fa-95e7-47bb-8f8a-6479ee95ff28.JPG",
    "her photos/a7203d44-028e-40c1-8a29-22694c0ce579.JPG",
    "her photos/B29F2118-1E6B-4784-A115-882F020D925A.JPEG",
    "her photos/bd93c3fe-8d10-454d-8714-e6c8d3a74800.JPG",
    "her photos/bf700d9b-1106-44f5-a0c2-cbf3065f0b4c.JPG",
    "her photos/c341f943-4fb2-4f71-9b77-b2cb8eb9ad0c.JPG",
    "her photos/c6a4c146-a171-40eb-9b6a-55375b22ac18.JPG",
    "her photos/d103b9a7-a5c6-479c-b733-4c4a42cc2152.JPG",
    "her photos/E8C73EAC-B174-40E6-8D3D-6F756267DFCB.JPG",
    "her photos/IMG_1385.JPEG"
  ];

  let foreverIndex = 0;
  let foreverIntervalId = null;
  let foreverRevealObserver = null;
  let swiggyUnlocked = false;

  function initForeverSlider() {
    if (!foreverSlider || foreverSlider.dataset.ready === "true") {
      return;
    }

    foreverPhotos.forEach((src, i) => {
      const img = document.createElement("img");
      img.src = encodeURI(src);
      img.alt = `Her photo ${i + 1}`;
      if (i === 0) {
        img.classList.add("active");
      }
      foreverSlider.appendChild(img);
    });

    foreverSlider.dataset.ready = "true";
  }

  function startForeverSlider() {
    initForeverSlider();
    const slides = foreverSlider ? Array.from(foreverSlider.querySelectorAll("img")) : [];

    if (slides.length <= 1) {
      return;
    }

    if (foreverIntervalId) {
      clearInterval(foreverIntervalId);
    }

    foreverIndex = 0;
    foreverIntervalId = setInterval(() => {
      slides[foreverIndex].classList.remove("active");
      foreverIndex = (foreverIndex + 1) % slides.length;
      slides[foreverIndex].classList.add("active");
    }, 2600);
  }

  function setupRevealObserver() {
    if (!("IntersectionObserver" in window)) {
      document.querySelectorAll(".reveal").forEach((el) => el.classList.add("show"));
      return;
    }

    if (!foreverRevealObserver) {
      foreverRevealObserver = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("show");
            }
          });
        },
        { threshold: 0.2 }
      );
    }

    document.querySelectorAll(".reveal").forEach((el) => {
      if (el.dataset.revealObserved === "true") {
        return;
      }
      foreverRevealObserver.observe(el);
      el.dataset.revealObserved = "true";
    });
  }

  function showForeverScroll() {
    document.body.classList.add("allow-scroll");
    if (scrollPrompt) {
      scrollPrompt.classList.add("show");
    }
    if (pageGap) {
      pageGap.classList.add("show");
    }
    if (endingPage) {
      endingPage.classList.add("show");
    }
    setupRevealObserver();
  }

  function resetSwiggy() {
    swiggyUnlocked = false;

    if (swiggyQuiz) {
      swiggyQuiz.reset();
    }

    if (swiggyCode) {
      swiggyCode.classList.add("blurred");
      swiggyCode.classList.remove("revealed");
      swiggyCode.textContent = swiggyCode.dataset.code || "SWIGGY-XXXX-XXXX";
    }

    if (swiggyResult) {
      swiggyResult.textContent = "";
    }

    if (swiggyCheck) {
      swiggyCheck.disabled = false;
      swiggyCheck.textContent = "Unlock My Treat";
    }
  }

  function unlockSwiggy() {
    if (!swiggyCode) {
      return;
    }

    const code = swiggyCode.dataset.code || "SWIGGY-XXXX-XXXX";
    swiggyCode.textContent = code;
    swiggyCode.classList.remove("blurred");
    swiggyCode.classList.add("revealed");
    swiggyUnlocked = true;

    if (swiggyResult) {
      swiggyResult.textContent = "Unlocked. Enjoy your treat üíñ";
    }

    if (swiggyCheck) {
      swiggyCheck.disabled = true;
      swiggyCheck.textContent = "Unlocked";
    }
  }

  function checkSwiggyQuiz() {
    if (swiggyUnlocked) {
      return;
    }

    if (!swiggyQuiz || !swiggyResult) {
      return;
    }

    const answers = { q1: "b", q2: "d", q3: "d" };

    const missing = [];
    const wrong = [];

    Object.entries(answers).forEach(([name, correct]) => {
      const picked = swiggyQuiz.querySelector(`input[name="${name}"]:checked`);
      if (!picked) {
        missing.push(name);
        return;
      }
      if (picked.value !== correct) {
        wrong.push(name);
      }
    });

    if (missing.length) {
      swiggyResult.textContent = "Answer all 3 questions first üôÇ";
      return;
    }

    if (wrong.length) {
      swiggyResult.textContent = "Not quite‚Ä¶ try again üòÑ";
      return;
    }

    unlockSwiggy();
  }

  noBtn.addEventListener("mouseover", () => {
    noTries++;

    hint.style.left = noBtn.offsetLeft + "px";
    hint.style.top  = noBtn.offsetTop - 25 + "px";

    if (noTries <= 3) {
      hint.textContent = messages[noTries - 1];
      hint.classList.add("show");
      noBtn.classList.add("shake");

      setTimeout(() => {
        hint.classList.remove("show");
        noBtn.classList.remove("shake");
      }, 700);
      return;
    }

    const maxX = stage.clientWidth - noBtn.offsetWidth;
    const maxY = stage.clientHeight - noBtn.offsetHeight;

    noBtn.style.left = Math.random() * maxX + "px";
    noBtn.style.top  = Math.random() * maxY + "px";

    if (yesScale < MAX_YES_SCALE) {
      yesScale += 0.12;
      yesBtn.style.transform = `scale(${yesScale})`;
    }
  });

  yesBtn.onclick = () => {
    questionStage.style.display = "none";
    loveCard.style.display = "block";
    if (musicYes) {
      musicYes.currentTime = 0;
      musicYes.play();
    }
    startHearts();
  };

  foreverBtn.onclick = () => {
    loveCard.style.display = "none";
    foreverCard.style.display = "block";
    if (musicYes) {
      musicYes.pause();
      musicYes.currentTime = 0;
    }
    music.play();
    startForeverSlider();
    document.body.classList.remove("allow-scroll");
    if (scrollPrompt) {
      scrollPrompt.classList.remove("show");
    }
    if (pageGap) {
      pageGap.classList.remove("show");
    }
    if (endingPage) {
      endingPage.classList.remove("show");
    }
    resetSwiggy();
    window.scrollTo({ top: 0, behavior: "auto" });
    setTimeout(showForeverScroll, 10000);
  };

  if (swiggyCheck) {
    swiggyCheck.addEventListener("click", checkSwiggyQuiz);
  }

  /* HEART ANIMATION */
  const canvas = document.getElementById("hearts");
  const ctx = canvas.getContext("2d");
  canvas.width = innerWidth;
  canvas.height = innerHeight;

  let hearts = [];

  function startHearts() {
    setInterval(() => {
      hearts.push({
        x: Math.random() * canvas.width,
        y: canvas.height + 10,
        s: Math.random() * 6 + 4,
        v: Math.random() * 1.5 + 0.6
      });
    }, 200);
    animate();
  }

  function drawHeart(x, y, s) {
    ctx.beginPath();
    ctx.moveTo(x, y);
    ctx.bezierCurveTo(x - s, y - s, x - s*1.5, y + s/2, x, y + s);
    ctx.bezierCurveTo(x + s*1.5, y + s/2, x + s, y - s, x, y);
    ctx.fill();
  }

  function animate() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle = "rgba(255,80,120,0.85)";
    hearts.forEach(h => {
      h.y -= h.v;
      drawHeart(h.x, h.y, h.s);
    });
    requestAnimationFrame(animate);
  }
</script>

</body>
</html>
